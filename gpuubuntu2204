#!/𝚋𝚒𝚗/𝚋𝚊𝚜𝚑

# Verify if GPU is CUDA-enabled
𝚕𝚜𝚙𝚌𝚒 | 𝚐𝚛𝚎𝚙 -𝚒 𝚗𝚟𝚒𝚍𝚒𝚊

# Remove previous NVIDIA driver installation
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚙𝚞𝚛𝚐𝚎 𝚗𝚟𝚒𝚍𝚒𝚊* -𝚢
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝 𝚛𝚎𝚖𝚘𝚟𝚎 𝚗𝚟𝚒𝚍𝚒𝚊-* -𝚢
𝚜𝚞𝚍𝚘 𝚛𝚖 /𝚎𝚝𝚌/𝚊𝚙𝚝/𝚜𝚘𝚞𝚛𝚌𝚎𝚜.𝚕𝚒𝚜𝚝.𝚍/𝚌𝚞𝚍𝚊* -𝚢
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚊𝚞𝚝𝚘𝚛𝚎𝚖𝚘𝚟𝚎 && 𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚊𝚞𝚝𝚘𝚌𝚕𝚎𝚊𝚗 -𝚢
𝚜𝚞𝚍𝚘 𝚛𝚖 -𝚛𝚏 /𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊* -𝚢

# System update
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚞𝚙𝚍𝚊𝚝𝚎 -𝚢
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚞𝚙𝚐𝚛𝚊𝚍𝚎 -𝚢

# Install essential packages
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚒𝚗𝚜𝚝𝚊𝚕𝚕 𝚐++ 𝚏𝚛𝚎𝚎𝚐𝚕𝚞𝚝𝟹-𝚍𝚎𝚟 𝚋𝚞𝚒𝚕𝚍-𝚎𝚜𝚜𝚎𝚗𝚝𝚒𝚊𝚕 𝚕𝚒𝚋𝚡𝟷𝟷-𝚍𝚎𝚟 -𝚢
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚒𝚗𝚜𝚝𝚊𝚕𝚕 𝚕𝚒𝚋𝚡𝚖𝚞-𝚍𝚎𝚟 𝚕𝚒𝚋𝚡𝚒-𝚍𝚎𝚟 𝚕𝚒𝚋𝚐𝚕𝚞𝟷-𝚖𝚎𝚜𝚊 𝚕𝚒𝚋𝚐𝚕𝚞𝟷-𝚖𝚎𝚜𝚊-𝚍𝚎𝚟 -𝚢

# Add PPA repository for NVIDIA drivers
𝚜𝚞𝚍𝚘 𝚊𝚍𝚍-𝚊𝚙𝚝-𝚛𝚎𝚙𝚘𝚜𝚒𝚝𝚘𝚛𝚢 𝚙𝚙𝚊:𝚐𝚛𝚊𝚙𝚑𝚒𝚌𝚜-𝚍𝚛𝚒𝚟𝚎𝚛𝚜/𝚙𝚙𝚊 -𝚢
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝 𝚞𝚙𝚍𝚊𝚝𝚎 -𝚢

# Install NVIDIA driver and dependencies
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚒𝚗𝚜𝚝𝚊𝚕𝚕 -𝚢 𝚌𝚞𝚍𝚊-𝚍𝚛𝚒𝚟𝚎𝚛𝚜

# Download and set up CUDA repository
𝚠𝚐𝚎𝚝 𝚑𝚝𝚝𝚙𝚜://𝚍𝚎𝚟𝚎𝚕𝚘𝚙𝚎𝚛.𝚍𝚘𝚠𝚗𝚕𝚘𝚊𝚍.𝚗𝚟𝚒𝚍𝚒𝚊.𝚌𝚘𝚖/𝚌𝚘𝚖𝚙𝚞𝚝𝚎/𝚌𝚞𝚍𝚊/𝚛𝚎𝚙𝚘𝚜/𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺/𝚡𝟾𝟼_𝟼𝟺/𝚌𝚞𝚍𝚊-𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺.𝚙𝚒𝚗
𝚜𝚞𝚍𝚘 𝚖𝚟 𝚌𝚞𝚍𝚊-𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺.𝚙𝚒𝚗 /𝚎𝚝𝚌/𝚊𝚙𝚝/𝚙𝚛𝚎𝚏𝚎𝚛𝚎𝚗𝚌𝚎𝚜.𝚍/𝚌𝚞𝚍𝚊-𝚛𝚎𝚙𝚘𝚜𝚒𝚝𝚘𝚛𝚢-𝚙𝚒𝚗-𝟼𝟶𝟶
𝚠𝚐𝚎𝚝 𝚑𝚝𝚝𝚙𝚜://𝚍𝚎𝚟𝚎𝚕𝚘𝚙𝚎𝚛.𝚍𝚘𝚠𝚗𝚕𝚘𝚊𝚍.𝚗𝚟𝚒𝚍𝚒𝚊.𝚌𝚘𝚖/𝚌𝚘𝚖𝚙𝚞𝚝𝚎/𝚌𝚞𝚍𝚊/𝟷𝟸.𝟹.𝟷/𝚕𝚘𝚌𝚊𝚕_𝚒𝚗𝚜𝚝𝚊𝚕𝚕𝚎𝚛𝚜/𝚌𝚞𝚍𝚊-𝚛𝚎𝚙𝚘-𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺-𝟷𝟸-𝟹-𝚕𝚘𝚌𝚊𝚕_𝟷𝟸.𝟹.𝟷-𝟻𝟺𝟻.𝟸𝟹.𝟶𝟾-𝟷_𝚊𝚖𝚍𝟼𝟺.𝚍𝚎𝚋
𝚜𝚞𝚍𝚘 𝚍𝚙𝚔𝚐 -𝚒 𝚌𝚞𝚍𝚊-𝚛𝚎𝚙𝚘-𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺-𝟷𝟸-𝟹-𝚕𝚘𝚌𝚊𝚕_𝟷𝟸.𝟹.𝟷-𝟻𝟺𝟻.𝟸𝟹.𝟶𝟾-𝟷_𝚊𝚖𝚍𝟼𝟺.𝚍𝚎𝚋
𝚜𝚞𝚍𝚘 𝚌𝚙 /𝚟𝚊𝚛/𝚌𝚞𝚍𝚊-𝚛𝚎𝚙𝚘-𝚞𝚋𝚞𝚗𝚝𝚞𝟸𝟸𝟶𝟺-𝟷𝟸-𝟹-𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-*-𝚔𝚎𝚢𝚛𝚒𝚗𝚐.𝚐𝚙𝚐 /𝚞𝚜𝚛/𝚜𝚑𝚊𝚛𝚎/𝚔𝚎𝚢𝚛𝚒𝚗𝚐𝚜/
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 𝚞𝚙𝚍𝚊𝚝𝚎 -𝚢

# Install CUDA Toolkit 12.3
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝-𝚐𝚎𝚝 -𝚢 𝚒𝚗𝚜𝚝𝚊𝚕𝚕 𝚌𝚞𝚍𝚊-𝚝𝚘𝚘𝚕𝚔𝚒𝚝-𝟷𝟸-𝟹

# Set up paths for CUDA
𝚎𝚌𝚑𝚘 '𝚎𝚡𝚙𝚘𝚛𝚝 𝙿𝙰𝚃𝙷=/𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-𝟷𝟸.𝟹/𝚋𝚒𝚗:$𝙿𝙰𝚃𝙷' >> ~/.𝚋𝚊𝚜𝚑𝚛𝚌
𝚎𝚌𝚑𝚘 '𝚎𝚡𝚙𝚘𝚛𝚝 𝙻𝙳_𝙻𝙸𝙱𝚁𝙰𝚁𝚈_𝙿𝙰𝚃𝙷=/𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-𝟷𝟸.𝟹/𝚕𝚒𝚋𝟼𝟺:$𝙻𝙳_𝙻𝙸𝙱𝚁𝙰𝚁𝚈_𝙿𝙰𝚃𝙷' >> ~/.𝚋𝚊𝚜𝚑𝚛𝚌
𝚜𝚘𝚞𝚛𝚌𝚎 ~/.𝚋𝚊𝚜𝚑𝚛𝚌
𝚜𝚞𝚍𝚘 𝚕𝚍𝚌𝚘𝚗𝚏𝚒𝚐

# Install cuDNN v11.3
𝚠𝚐𝚎𝚝 𝚑𝚝𝚝𝚙𝚜://𝚍𝚎𝚟𝚎𝚕𝚘𝚙𝚎𝚛.𝚗𝚟𝚒𝚍𝚒𝚊.𝚌𝚘𝚖/𝚌𝚘𝚖𝚙𝚞𝚝𝚎/𝚖𝚊𝚌𝚑𝚒𝚗𝚎-𝚕𝚎𝚊𝚛𝚗𝚒𝚗𝚐/𝚌𝚞𝚍𝚗𝚗/𝚜𝚎𝚌𝚞𝚛𝚎/𝟾.𝟸.𝟷.𝟹𝟸/𝟷𝟷.𝟹_𝟶𝟼𝟶𝟽𝟸𝟶𝟸𝟷/𝚌𝚞𝚍𝚗𝚗-𝟷𝟷.𝟹-𝚕𝚒𝚗𝚞𝚡-𝚡𝟼𝟺-𝚟𝟾.𝟸.𝟷.𝟹𝟸.𝚝𝚐𝚣
𝚝𝚊𝚛 -𝚡𝚣𝚟𝚏 "𝚌𝚞𝚍𝚗𝚗-𝟷𝟷.𝟹-𝚕𝚒𝚗𝚞𝚡-𝚡𝟼𝟺-𝚟𝟾.𝟸.𝟷.𝟹𝟸.𝚝𝚐𝚣"

# Copy cuDNN files to CUDA toolkit directory
𝚜𝚞𝚍𝚘 𝚌𝚙 -𝙿 𝚌𝚞𝚍𝚊/𝚒𝚗𝚌𝚕𝚞𝚍𝚎/𝚌𝚞𝚍𝚗𝚗.𝚑 /𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-𝟷𝟸.𝟹/𝚒𝚗𝚌𝚕𝚞𝚍𝚎 
𝚜𝚞𝚍𝚘 𝚌𝚙 -𝙿 𝚌𝚞𝚍𝚊/𝚕𝚒𝚋𝟼𝟺/𝚕𝚒𝚋𝚌𝚞𝚍𝚗𝚗* /𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-𝟷𝟸.𝟹/𝚕𝚒𝚋𝟼𝟺/
𝚜𝚞𝚍𝚘 𝚌𝚑𝚖𝚘𝚍 𝚊+𝚛 /𝚞𝚜𝚛/𝚕𝚘𝚌𝚊𝚕/𝚌𝚞𝚍𝚊-𝟷𝟸.𝟹/𝚕𝚒𝚋𝟼𝟺/𝚕𝚒𝚋𝚌𝚞𝚍𝚗𝚗*

# Install nvtop for monitoring
𝚜𝚞𝚍𝚘 𝚊𝚙𝚝 𝚒𝚗𝚜𝚝𝚊𝚕𝚕 𝚗𝚟𝚝𝚘𝚙 -𝚢

# Verify the installation
𝚗𝚟𝚒𝚍𝚒𝚊-𝚜𝚖𝚒
𝚗𝚟𝚌𝚌 -𝚅
